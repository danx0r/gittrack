<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>gittrack</title>
        <style>
            .card {
                box-sizing: border-box;
                -moz-box-sizing: border-box;
                position: absolute;
                width: 100%;
                padding: 4px;
            }
            .inner {
                box-sizing: border-box;
                -moz-box-sizing: border-box;
                padding: 2px;
                border: solid;
                /*border-width: thin;*/
                height: 100%;
                overflow: hidden;
            }
            .colhead {
                text-align: center;
                background-color: #888;
                color: white;
                margin-left: 4px;
                margin-right: 4px;
            }
        </style>
    </head>
    <body style="font-family:sans" onkeypress="adjust(event.keyCode | event.charCode)">
        <div style="width:130px;float:left">
            <div class="colhead">
                Date
            </div>
            <div style="position:relative;width:100%">
                {% for day in days %}
                    <div class="card" vp="{{ forloop.counter0 }}" vh="1">
                        <div class="inner" style="background-color:{{ day.color }}; color:{{ day.texcol }}; border-color: #888">
                            {{ day.dow }}
                            <br/>
                            {{ day.date }}
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
        {% for col in columns %}
            <div style="width:300px;float:left">
                <div class="colhead">
                    {{ col.0 }}
                </div>
                <div style="position:relative">
                    {% for card in col.1 %}
                        <div class="card" vp="{{ card.start }}" vh="{{ card.length }}">
                            <div class="inner" style="background-color:{{ card.color }}; color:{{ card.texcol }}; border-style:{{ card.border }}; border-color:{{ card.bcolor }}">
                                <div style="background-color:#333;color:#eee;padding: 0 2px 0 2px; float:left">
                                    {{ card.num }}
                                </div>
                                {% for bb in card.BB %}
                                    <div style="float:left">
                                        &nbsp;
                                    </div>
                                    <div style="background-color:#787878;color:white;font-size:90%;padding: 0 2px 0 2px; float:left">
                                        {{ bb }}
                                    </div>
                                {% endfor %}
                                <span style="font-size: 30%">&nbsp;</span>
                                {{ card.title }}
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        {% endfor %}
        <!-- <div class="card" vp="1" vh="1" style="color:red">TEST</div> -->
        <script>
            mul=72.0;
            function resize(f) {
                mul *= f;
                var els = document.querySelectorAll(".card");
                // console.log(els);
                for(var i=0; i<els.length; i++) {
                    var el = els[i]
                    var vp = parseFloat(el.getAttribute('vp'))
                    el.style.top = "" + (vp*mul+"px");
                    var at = el.getAttribute('vh');
                    if (at != null) {
                        var vh = parseFloat(at);
                        el.style.height = "" + (vh*mul-0+"px");
                        // console.log("HEIGHT:", mul, el.style.height)
                    }
                }
            }
            function adjust(key) {
                // console.log(key);
                if(key == 45||key == 95) {
                    resize(0.8);
                }
                if(key == 61||key == 43) {
                    resize(1.25);
                }
            }
            resize(1);
        </script>
    </body>
</html>
